# Chapter 6. 객체 지향 프로그래밍 (1)

## 참조 변수
* 참조 변수는 특정 객체의 주소를 저장하는 변수
* 클래스의 인스터스를 저정하는 변수
  * 힙 메모리에 인스턴스를 저장하기 위한 메모리가 할당
  * 참조 변수는 인스턴스가 저장된 힙 메모리의 주소를 저장
    * new 키워드를 사용하면 해당 인스턴스를 저장하는 메모리가 힙에 할당
    * 힙에 할당된 메모리의 주소가 참조 변수가 가리키는 주소
  * 참조 변수 자체는 스택 메모리에 할당
    * 참조 변수 선언은 힙 메모리 주소의 크기 만큼의 메모리가 스택에 할당

## 선언 위치에 따른 변수의 종류
* 선언 위치에 따라 클래스 내 변수의 종류가 달라짐
  * 변수에 대한 메모리 할당 시기
  * 변수의 선언 위치
* 인스턴스 변수
  * 클래스 영역에서 선언
  * 인스턴스가 생성될 때 할당
  * 인스턴스 마다 고유한 상태를 유지해야 하는 속성
* 클래스 변수
  * 모든 인스턴스가 공유하는 저장 공간
  * 인스턴스 생성없이 (클래스 이름).(클래스 변수) 형태로 접근 가능
  * 메모리에 클래스가 로딩 될 때 생성
  * 전역 변수의 성격을 갖음
* 지역 변수
  * 코드 블럭 내에서 선언
  * 선언된 코드 블럭 내에서만 사용 가능
  * 선언된 코드 블럭을 벗어나면 해당 변수의 메모리 해제

## JVM 메모리 구조
* 메서드 영역
  * 런타임에서 특정 클래스가 사용되면, 해당 클래스 정보를 저장
  * 클래스 변수가 할당되는 영역
* 콜 스택(call stack)
  * 메서드의 작업에 필요한 메모리 공간 제공
  * 메서드 호출 시, 메서드의 매개변수, 지역 변수, 연산 중간 결과 등을 저장
  * 메서드의 작업이 완료되면, 사용하였던 메모리 공간 반환
  * 연속적인 메서드 호출 시, 가장 마지막에 호출된 메서드가 호출의 상위에 위치
    * 메서드는 동기 처리 i.e 호출한 메서드의 작업이 끝나야 다음 작업 실행
    * 호출 스택의 가장 상위에 위치한 메서드가 현재 실행 중인 메서드
* 힙(heap)
  * 인스턴스가 생성되는 공간
  * 런타임에서 생성되는 인스턴스의 메모리가 할당되는 영역

## 클래스 멤버 초기화
* 변수의 초기화
  * 멤버 변수는 초기화를 하지 않아도 변수의 자료형에 맞는 기본값으로 초기화
    * `boolean`         : `true`
    * `char`            : `\u0000`
    * `byte, short, int`: `0`
    * `long`            : `0L`
    * `float`           : `0.0f`
    * `double`          : `0.0`
    * 참조형 변수         : `null`
  * 지역 변수는 반드시 초기화 후 접근 가능
* 멤버 초기화 순서
  * 클래스 변수 : 기본값 -> 명시적 초기화 -> 초기화 블럭
  * 인스턴스 변수 : 기본값 -> 명시적 초기화 -> 초기화 블럭 -> 생성자
* 멤버 변수를 초기화하는 방법
  * 명시적 초기화
    * 3가지 방법 중 가장 먼저 처리되는 작업
    * 클래스 정의 내에서의 정의
    * 간단하고 명료한 경우 사용
    * 복잡한 초기화 작업은 생성자 or 초기화 블럭 사용
      * 배열의 요소 초기화
      * 예외 처리
  * 생성자
    * 생성자 메서드 내에서 멤버 변수 초기화
    * 생성자 메서드 내에서는 `this(...)`를 통해 다른 생성사 호출 가능
      * 단, 생성자의 첫 줄에서만 호출 가능
    * 다양한 생성자 메서드의 오버로딩 가능
  * 초기화 블럭
    ```
    class SomeClass {
      static {  /* 클래스변수 초기화 */}
      {
        /* 인스턴스 변수 초기화 */
      }
    }
    ```
* 클래스 초기화 블럭은 클래스가 메모리에 처음 로딩될 때 **한번 만** 수행
  * 클래스가 처음 로딩 될 때, 클래스 변수들에 대한 메모리 할당
  * 그 이후에 클래스 초기화 블록을 통해 초기화
* **인스턴스 초기화 블럭은 생성자보다 먼저 수행**
  * 인스턴스 변수의 초기화는 주로 생성자 사용
  * 생성자들에서 공통으로 수행해야 하는 코드는 인스턴스 초기화 블럭 사용